<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate Site Data Along Coarser Spatial Grid — fb_aggregate_site_data • funbiogeo</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate Site Data Along Coarser Spatial Grid — fb_aggregate_site_data"><meta name="description" content="This function helps aggregating site data along a coarser grid.
The idea is that you have any type of data at the site scale
(diversity metrics, environmental data, etc.) but you would like to work
on it at a coarser scale, or you want to visualize it at that scale.
This function helps you do exactly that."><meta property="og:description" content="This function helps aggregating site data along a coarser grid.
The idea is that you have any type of data at the site scale
(diversity metrics, environmental data, etc.) but you would like to work
on it at a coarser scale, or you want to visualize it at that scale.
This function helps you do exactly that."><meta property="og:image" content="https://frbcesab.github.io/funbiogeo/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">funbiogeo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/funbiogeo.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/diagnostic-plots.html">Diagnostic Plots in funbiogeo</a></li>
    <li><a class="dropdown-item" href="../articles/long-format.html">Formatting your data</a></li>
    <li><a class="dropdown-item" href="../articles/upscaling.html">Upscaling your data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/frbcesab/funbiogeo/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Aggregate Site Data Along Coarser Spatial Grid</h1>
      <small class="dont-index">Source: <a href="https://github.com/frbcesab/funbiogeo/blob/main/R/fb_aggregate_site_data.R" class="external-link"><code>R/fb_aggregate_site_data.R</code></a></small>
      <div class="d-none name"><code>fb_aggregate_site_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function helps aggregating site data along a coarser grid.
The idea is that you have any type of data at the site scale
(diversity metrics, environmental data, etc.) but you would like to work
on it at a coarser scale, or you want to visualize it at that scale.
This function helps you do exactly that.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fb_aggregate_site_data</span><span class="op">(</span><span class="va">site_locations</span>, <span class="va">site_data</span>, <span class="va">agg_grid</span>, fun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-site-locations">site_locations<a class="anchor" aria-label="anchor" href="#arg-site-locations"></a></dt>
<dd><p>an <code>sf</code> object with the spatial geometries of sites.
<strong>NOTE</strong>: the first column should be named <strong><code>"site"</code></strong>
and indicate site names.</p></dd>


<dt id="arg-site-data">site_data<a class="anchor" aria-label="anchor" href="#arg-site-data"></a></dt>
<dd><p>a <code>matrix</code> or <code>data.frame</code> containing values per sites to
aggregate along the provided grid. Can have one or several columns
(variables to aggregate). The first column must contain sites names as
provided in the example dataset <code>site_locations</code>.</p></dd>


<dt id="arg-agg-grid">agg_grid<a class="anchor" aria-label="anchor" href="#arg-agg-grid"></a></dt>
<dd><p>a <code>SpatRaster</code> object (package <code>terra</code>).
A raster of one single layer, that defines the grid along which
to aggregate.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>the function used to aggregate points values when there are
multiple points in one cell. Default is <code>mean</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>SpatRaster</code> object with as many layers as columns in <code>site_data</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://frbcesab.github.io/funbiogeo/">"funbiogeo"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"site_locations"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"site_species"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import grid ----</span></span></span>
<span class="r-in"><span><span class="va">tavg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"annual_mean_temp.tif"</span>, package <span class="op">=</span> <span class="st">"funbiogeo"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tavg</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">tavg</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Rasterize 3 first species counts ----</span></span></span>
<span class="r-in"><span><span class="fu">fb_aggregate_site_data</span><span class="op">(</span><span class="va">site_locations</span>, <span class="va">site_species</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">tavg</span>, fun <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 290, 405, 3  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 0.08333333, 0.08333333  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : -10.5, 23.25, 35.83333, 60  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : lon/lat WGS 84 (EPSG:4326) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source(s)   : memory</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> varnames    : annual_mean_temp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               annual_mean_temp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               annual_mean_temp </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> names       : sp_001, sp_002, sp_003 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min values  :      0,      0,      0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max values  :      1,      1,      1 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicolas Casajus, Matthias Grenié.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

